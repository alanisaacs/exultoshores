<!DOCTYPE html>
<html>
    <head>
        <link rel=stylesheet type=text/css href="{{ url_for('static', filename='styles.css') }}">
        <script>
            function showWines() {
                // for wine in wines
                //     var x = "wine|tojson";
                //     console.log(x);
                // endfor
                
                var htmlstring = "";
                htmlstring += "<h2>WINES</h2>";
                {% for wine in wines %}
                    htmlstring += 
                        "<div class=wineItem>" +
                            "<div class=wineLabel>" + 
                                "<img src=/static/{{wine.label_photo}}>" + 
                            "</div>" +
                            "<div class=wineInfo>" +
                                "<p><strong>{{wine.name}}</strong></p>" +
                                "<p>{{wine.description}}</p>" +
                                "<p>" +
                                "{{wine.year}} " +
                                "{{wine.country.name}} " +
                                "{{wine.region.name}}<br> " +
                                "${{wine.price}} " +
                                "{{wine.rating}} points " +
                                "{{wine.abv}} abv <br>" +
                                "tasted on {{wine.date_tasted.strftime('%Y-%m-%d')}} " +
                                "by {{wine.sommelier.username}}" +
                                "</p>" +
                            "</div>" +
                        "</div>";
                {% endfor %}

                winelist.innerHTML = htmlstring;
            }

            /* THIS WORKS TO REPLACE "None" WITH ""
                            if ("wine.year" != "None") { note double braces around wine.year
                                htmlstring += "wine.year";
                            }; 
            */
        </script>
    </head>
    <body>
        <h1>The Wine App</h1>
        <div class="subhead">
            An Exult-O-Shores Production
        </div>

        <p>
            <a href="/manageCountryRegion">Manage Countries & Regions</a> |
            <a href="/wine/new">Create a New Wine</a> |
            <a href="/wineTable">Edit Wines</a>
        </p>
        
        <div id="winelist">

            <script>showWines();</script>

            <!--THIS WORKS BUT WHAT A PAIN
             for wine in wines 
                 if wine.year == None 
                    <p>EMPTY STRING</p>
                 else 
                    <p>wine.year</p>
                 endif 
             endfor 
            -->
        </div>
        
    </body>
</html>